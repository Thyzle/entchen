<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ü¶Ü Entchens Lern-App v2.3.1 ‚ù§Ô∏è</title>
<style>
:root{
  --bg:#fff5fb;--card:#fff;--text:#1f2937;
  --accent:#db2777;--muted:#6b7280;
  --ok:#22c55e;--err:#ef4444;
}
*{box-sizing:border-box;}
body{
  margin:0;font-family:Inter,system-ui,Arial,sans-serif;
  background:var(--bg);color:var(--text);
}
.container{max-width:980px;margin:18px auto;padding:14px;}
header{
  display:flex;justify-content:space-between;align-items:center;
  gap:10px;flex-wrap:wrap;
}
h1{margin:0;font-size:20px;color:var(--accent);}
.btn{
  padding:10px 14px;border:1px solid #f9a8d4;border-radius:10px;
  background:#fff;cursor:pointer;transition:.2s;
}
.btn.primary{background:var(--accent);color:#fff;border-color:transparent;}
.btn:disabled{opacity:.6;cursor:not-allowed;}
.btn.ghost{background:#fff0fb;border-color:#ffd6ef;}
.card{
  background:var(--card);border:1px solid #ffd6ef;border-radius:14px;
  box-shadow:0 8px 24px rgba(0,0,0,.06);padding:16px;margin-top:12px;
}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;}
select{
  padding:8px;border-radius:8px;border:1px solid #f9a8d4;background:#fff;
}
.topic{color:#c026d3;font-weight:700;}
.question{font-size:18px;margin:8px 0 12px;}
.opt{
  display:block;width:100%;text-align:left;margin:6px 0;
  padding:10px;border:1px solid #f9a8d4;border-radius:10px;
  background:#fff;cursor:pointer;
}
.opt:hover{background:#fff1f7;}
.correct{background:#dcfce7;border-color:#16a34a;}
.wrong{background:#fee2e2;border-color:#ef4444;}
.hidden{display:none;}
.meta{display:flex;justify-content:space-between;color:var(--muted);font-size:14px;margin-top:8px;}
hr{border:none;border-top:1px dashed #ffd6ef;margin:10px 0;}
.note{font-size:13px;color:#6b7280;}
.kpi{display:flex;gap:14px;flex-wrap:wrap;margin-top:10px;}
.kpi .chip{
  background:#fff;border:1px solid #ffd6ef;border-radius:999px;
  padding:6px 10px;font-size:12px;color:#86198f;
}
.inputRow{display:flex;gap:8px;align-items:center;margin:8px 0;}
.inputRow input{padding:8px;border-radius:8px;border:1px solid #f1a6d6;width:160px;}
footer.note{text-align:center;margin-top:16px;}
</style>
</head>
<body>
<div class="container">
  <header>
    <h1>ü¶Ü Entchens Lern-App v2.3.1 ‚ù§Ô∏è</h1>
    <div class="row">
      <button id="btnPrint" class="btn">Als PDF drucken</button>
      <button id="btnHomeTop" class="btn ghost">üè† Zur√ºck zum Start</button>
    </div>
  </header>

  <!-- Startseite -->
  <section class="card" id="home">
    <p><strong>ü¶Ü Hi Entchen üíï ‚Äì sch√∂n, dass du wieder da bist!</strong></p>
    <div class="kpi" id="statsRow">
      <span class="chip" id="statLast">Noch keine Pr√ºfung gespeichert</span>
      <span class="chip" id="statAvg"></span>
      <span class="chip" id="statErr"></span>
    </div>
    <hr>
    <div class="row">
      <label for="topicSel"><strong>Thema w√§hlen:</strong></label>
      <select id="topicSel"></select>
      <span class="note">Tipp: F√ºr die Pr√ºfung ‚ÄûAlle Themen‚Äú w√§hlen.</span>
    </div>
    <div class="row" style="margin-top:10px;">
      <button id="btnLearn" class="btn primary">Lernen</button>
      <button id="btnExam" class="btn">Pr√ºfung (30 / 60 min)</button>
      <button id="btnErrTrain" class="btn ghost" disabled>Letztes Fehler-Training starten</button>
    </div>
  </section>

  <!-- Quiz -->
  <section class="card hidden" id="quizCard">
    <div class="topic" id="qTopic"></div>
    <div class="question" id="qText"></div>
    <div id="qOptions"></div>
    <div id="qNum" class="hidden"></div>
    <div id="qExplain" class="hidden"></div>
    <div class="meta">
      <span id="progress"></span>
      <span id="timer" class="hidden"></span>
    </div>
    <div class="row" style="margin-top:10px;">
      <button id="btnBack" class="btn">Zur√ºck</button>
      <button id="btnNext" class="btn" disabled>Weiter</button>
      <button id="btnExplain" class="btn" disabled>Erkl√§rung</button>
      <button id="btnDownload" class="btn hidden">Ergebnis herunterladen (JSON)</button>
    </div>
  </section>

  <!-- Ergebnis -->
  <section class="card hidden" id="resultCard">
    <h3 id="resultHead"></h3>
    <p id="resultText"></p>
    <div class="row">
      <button id="btnErrNow" class="btn ghost hidden">Fehler-Training jetzt starten üîÅ</button>
      <button id="btnHome" class="btn">Zur√ºck zum Start</button>
    </div>
  </section>

  <footer class="note">
    Offline ‚Äì Inhalte orientieren sich am Pr√ºfungsbereich Wirtschafts- & Sozialkunde (60 Minuten).
  </footer>
</div>

<!-- === Teil 2: JavaScript wird hier eingef√ºgt === -->
<script>
/* ========= KONFIGURATION: Themen, Verteilung, Seeds ========= */
const TOPICS = [
  "Sozialversicherung",
  "Lohn & Steuern",
  "Ausbildungs- & Arbeitsrecht",
  "Wirtschaftsgrundlagen & Betrieb",
  "Arbeitsschutz & Hygiene",
  "Datenschutz & Kommunikation",
  "Umwelt & Entsorgung"
];

/* Realistische Zielverteilung ‚âà 220 Fragen */
const DISTRIB = {
  "Sozialversicherung": 55,
  "Lohn & Steuern": 55,
  "Ausbildungs- & Arbeitsrecht": 45,
  "Wirtschaftsgrundlagen & Betrieb": 33,
  "Arbeitsschutz & Hygiene": 18,
  "Datenschutz & Kommunikation": 15, // vorher 10
  "Umwelt & Entsorgung": 10           // vorher 4
};


/* Rechenaufgaben (fix) ‚Äì werden zus√§tzlich aufgenommen */
const NUMERIC_TASKS = [
  ["Lohn & Steuern","Nettolohn (Grobabsch√§tzung): Brutto 2 800 ‚Ç¨, Abz√ºge gesamt 33 %. Wie hoch ist der Nettolohn?", 2800*(1-0.33), 2.0, "‚Ç¨", "Netto ‚âà Brutto √ó (1 ‚àí Abz√ºge) ‚Üí 2 800 √ó 0,67 = 1 876,00 ‚Ç¨."],
  ["Lohn & Steuern","Lohnfortzahlung: Monatsbrutto 2 400 ‚Ç¨, krankheitsbedingter Ausfall 10 Kalendertage. Lohnfortzahlung in ‚Ç¨?", 2400/30*10, 2.0, "‚Ç¨", "Tageslohn = 2 400 / 30 = 80 ‚Ç¨. 10 Tage ‚Üí 800,00 ‚Ç¨."],
  ["Lohn & Steuern","Arbeitgeber-Gesamtkosten: Brutto 3 000 ‚Ç¨, AG-SV-Anteil 20 %. Gesamtkosten?", 3000*1.20+3000*0, 2.0, "‚Ç¨", "Gesamtkosten = Brutto + (Brutto √ó AG-Anteil) ‚Üí 3 000 + 600 = 3 600,00 ‚Ç¨."],
  ["Wirtschaftsgrundlagen & Betrieb","Einkauf: Listenpreis 500 ‚Ç¨, 10 % Rabatt, 3 % Skonto bei Barzahlung. Zahlbetrag?", 500*0.9*0.97, 1.0, "‚Ç¨", "Endpreis = 500 √ó 0,90 √ó 0,97 = 436,50 ‚Ç¨."],
  ["Wirtschaftsgrundlagen & Betrieb","Umsatzsteuer: Netto 50 ‚Ç¨, USt 19 %. Brutto?", 50*1.19, 1.0, "‚Ç¨", "Brutto = Netto √ó 1,19 = 59,50 ‚Ç¨."]
];

/* SEEDS: Offizieller Pr√ºfungsstil, 4 Optionen, praxisnaher Kontext.
   Jede Frage: [Fragetext, Richtige, [Falsch1, Falsch2, Falsch3], Erkl√§rung] */
const SEEDS = {
  "Sozialversicherung": [
    ["Welche Versicherungszweige umfasst die gesetzliche Sozialversicherung?", "Kranken-, Pflege-, Renten-, Arbeitslosen- und Unfallversicherung", ["Nur Kranken- und Rentenversicherung", "Nur Unfallversicherung", "Nur Pflege- und Krankenversicherung"], "Die f√ºnf Zweige bilden die gesetzliche Sozialversicherung."],
    ["Wer tr√§gt die Beitr√§ge zur gesetzlichen Unfallversicherung?", "Arbeitgeber", ["Arbeitnehmer", "Arbeitgeber und Arbeitnehmer je zur H√§lfte", "Der Staat"], "Die UV wird allein durch die Unternehmen finanziert (Berufsgenossenschaften)."],
    ["Welche Aufgabe hat die Arbeitslosenversicherung (SGB III)?", "Leistungen bei Arbeitslosigkeit und Vermittlung", ["Nur Rentenberechnung", "Nur Krankenbehandlung", "Bauaufsicht"], "Absicherung bei Arbeitslosigkeit, F√∂rderung der Besch√§ftigung."],
    ["Wer erhebt die Beitr√§ge zur gesetzlichen Krankenversicherung (GKV)?", "Die Krankenkassen", ["Das Finanzamt", "Die Berufsgenossenschaft", "Der Zoll"], "Die Krankenkassen verwalten und erheben die Beitr√§ge."],
    ["Wie werden GKV-Beitr√§ge im Regelfall finanziert?", "Parit√§tisch durch Arbeitgeber und Arbeitnehmer", ["Nur Arbeitnehmer", "Nur Arbeitgeber", "Nur die Krankenkassen"], "Grundsatz der Parit√§t; Ausnahmen: Zusatzbeitrag GKV, UV."],
    ["Welche Leistung ist NICHT Aufgabe der Rentenversicherung?", "Kurzfristige Lohnersatzleistung bei Krankheit", ["Altersrente", "Reha-Leistungen", "Erwerbsminderungsrente"], "Lohnfortzahlung/Krankengeld geh√∂ren nicht zur Rentenversicherung."],
    ["Wer ist Tr√§ger der gesetzlichen Unfallversicherung?", "Berufsgenossenschaften", ["Krankenkassen", "Rentenversicherungstr√§ger", "Agentur f√ºr Arbeit"], "BG sind Tr√§ger der UV."],
    ["Was ist der Zweck der Pflegeversicherung?", "Absicherung des Pflegerisikos", ["Absicherung gegen Arbeitsunf√§lle", "Arbeitslosigkeit", "Altersarmut"], "Pflegebed√ºrftigkeit finanziell absichern."],
    ["Was beschreibt der Begriff Beitragsbemessungsgrenze?", "Einkommensgrenze, bis zu der Beitr√§ge erhoben werden", ["Mindestlohn", "Grundfreibetrag Lohnsteuer", "Pf√§ndungsfreigrenze"], "BBG begrenzt die beitragspflichtige Entgeltbasis."],
    ["Wer meldet einen meldepflichtigen Arbeitsunfall?", "Der Arbeitgeber an die BG", ["Der/die Besch√§ftigte an die GKV", "Das Finanzamt", "Niemand"], "Meldepflicht des Arbeitgebers gegen√ºber der BG."],
    ["Wie erfolgt die Versicherung in der GKV grunds√§tzlich?", "Pflichtversicherung bei √úberschreiten der Minijobgrenze", ["Immer privat", "Nur freiwillig", "Nur durch Tarifvertrag"], "Arbeitnehmer sind regelm√§√üig pflichtversichert (Ausnahmen m√∂glich)."],
    ["Was ist die elektronische Gesundheitskarte (eGK)?", "Versichertennachweis in der GKV", ["Steuer-ID", "Rentenbescheid", "BG-Ausweis"], "Nachweis der Versicherungszugeh√∂rigkeit in der GKV."],
    ["Welche Aussage zur Familienversicherung in der GKV ist korrekt?", "Mitversicherte Angeh√∂rige zahlen keinen eigenen Beitrag", ["Immer eigene Beitr√§ge", "Nur in der UV m√∂glich", "Nur bei Vollzeitbesch√§ftigung"], "Familienversicherung erm√∂glicht beitragsfreie Mitversicherung."],
    ["Was ist ein Zusatzbeitrag in der GKV?", "Kassenindividueller Aufschlag auf den Beitragssatz", ["Steuerzuschlag", "BG-Umlage", "Pflichtbeitrag der UV"], "Zusatzbeitrag variiert je Krankenkasse."],
    ["Was trifft auf die gesetzliche Rentenversicherung zu?", "Umlageverfahren", ["Kapitaldeckungsverfahren", "Nur steuerfinanziert", "Nur privat"], "Aktive finanzieren die Leistungen der Rentner (Umlage)."]
  ],
  "Lohn & Steuern": [
    ["Was ist der Bruttolohn?", "Lohn vor Abzug von Steuern und Sozialabgaben", ["Auszahlungsbetrag", "Nur Sachbez√ºge", "Netto ohne LSt"], "Brutto = vor Abz√ºgen, Netto = nach Abz√ºgen."],
    ["Welche Steuer f√ºhrt der Arbeitgeber monatlich ab?", "Lohnsteuer", ["Mehrwertsteuer", "Grundsteuer", "Kfz-Steuer"], "Einbehalt und Abf√ºhrung der Lohnsteuer ans Finanzamt."],
    ["Was geh√∂rt NICHT zu typischen Abz√ºgen auf der Lohnabrechnung?", "Private Eink√§ufe", ["Rentenversicherung", "Krankenversicherung", "Pflegeversicherung"], "Private Ausgaben stehen nicht auf der Lohnabrechnung."],
    ["Wof√ºr steht die Steuerklasse?", "Einteilung f√ºr den Lohnsteuerabzug", ["Krankenkassenwahl", "Rentenstufe", "Pflegestufe"], "Beeinflusst H√∂he des Lohnsteuerabzugs."],
    ["Was trifft auf den Nettolohn zu?", "Betrag nach Abzug von Steuern und Sozialabgaben", ["Betrag vor allen Abz√ºgen", "Nur Bruttolohn", "Nur Zuschl√§ge"], "Auszahlungsbetrag = Netto."],
    ["Wie werden Einmalzahlungen (z. B. Weihnachtsgeld) h√§ufig behandelt?", "Erh√∂hter LSt-Abzug nach Jahrestabelle m√∂glich", ["Nie steuerpflichtig", "Nur SV-pflichtig", "Immer steuerfrei"], "Einmalbez√ºge haben oft besondere LSt-Berechnung."],
    ["Welche Aussage zur SV-Beitragslast ist korrekt?", "Grunds√§tzlich parit√§tisch (AG/AN), mit Ausnahmen", ["Nur AN zahlen", "Nur AG zahlt alles", "Nur Staat zahlt"], "Parit√§t mit Ausnahmen (Zusatzbeitrag GKV, UV nur AG)."],
    ["Was ist der Solidarit√§tszuschlag bezogen auf LSt?", "Erg√§nzungsabgabe zur Einkommensteuer", ["Beitrag zur GKV", "Pflicht zu BG", "Kirchensteuer"], "Ggf. f√§llig abh√§ngig von LSt-H√∂he (Freigrenzen)."],
    ["Welche Aussage zu Minijobs ist korrekt?", "Bis 520 ‚Ç¨ mtl. (typisch), besondere Abgabenregelung", ["Immer SV-pflichtig voll", "Nie steuerpflichtig", "Immer wie Vollzeit behandelt"], "Geringf√ºgige Besch√§ftigung mit Sonderregeln."],
    ["Wer erh√§lt Entgeltfortzahlung im Krankheitsfall (grunds√§tzlich 6 Wochen)?", "Arbeitnehmer*innen nach EFZG", ["Nur Selbstst√§ndige", "Nur Azubis", "Niemand"], "Entgeltfortzahlungsgesetz."],
    ["Welcher Zuschlag ist regelm√§√üig steuer- und SV-pflichtig?", "Schicht-/Funktionszulagen (i. d. R.)", ["Nachtzuschlag i. d. R. steuerfrei (Grenzen)", "Sonntagszuschlag immer steuerfrei", "Alle Zuschl√§ge steuerfrei"], "Steuerfreiheit bestimmter Zuschl√§ge nur unter Bedingungen."],
    ["Welches Dokument ist Grundlage f√ºr den LSt-Abzug?", "Elektronische Lohnsteuerabzugsmerkmale (ELStAM)", ["eGK", "Sozialversicherungsausweis", "Meldebescheinigung UV"], "ELStAM enth√§lt Klasse, Kinderfreibetr√§ge etc."],
    ["Welche Abgabe ist keine Sozialversicherung?", "Kirchensteuer", ["Arbeitslosenversicherung", "Pflegeversicherung", "Rentenversicherung"], "Kirchensteuer ist Steuer, keine SV-Abgabe."],
    ["Was ist der Zweck einer Lohnsteuerbescheinigung?", "J√§hrlicher Nachweis der Lohn-/Abgabenwerte", ["Ersatz f√ºr ELStAM", "Anmeldung zur GKV", "Antrag auf BG-Leistungen"], "Bestandteil der Jahresmeldungen."],
    ["Wie wirkt sich Steuerklasse III (verheiratet) typischerweise aus?", "Geringerer monatlicher LSt-Abzug", ["Immer h√∂herer LSt-Abzug", "Unver√§ndert", "Nur f√ºr Singles"], "Lohnsteuerverteilung im Ehegattensplitting."]
  ],
  "Ausbildungs- & Arbeitsrecht": [
    ["Wer schlie√üt den Ausbildungsvertrag ab?", "Ausbildender und Auszubildende*r", ["Die Berufsschule", "Die Kammer allein", "Die Agentur f√ºr Arbeit"], "Vertragspartner sind Ausbildender und Azubi; Kammer registriert."],
    ["Maximale Probezeit nach BBiG?", "4 Monate", ["1 Monat", "6 Monate", "12 Monate"], "¬ß 20 BBiG."],
    ["Mindesturlaub bei 5-Tage-Woche (BUrlG)?", "20 Arbeitstage", ["15", "24", "30"], "24 Werktage bei 6-Tage-Woche ‚âô 20 AT bei 5-Tage-Woche."],
    ["K√ºndigungsfrist AN (BGB-Standard, ohne Abweichung)?", "Vier Wochen zum 15. oder Monatsende", ["Eine Woche", "Zwei Monate", "Immer 3 Monate"], "¬ß 622 BGB, Grundregel."],
    ["Pflichten des Auszubildenden laut BBiG?", "Lernpflicht, Sorgfalt, Weisungsgebundenheit, Berichtsheft", ["Nur Anwesenheit", "Nur Pr√ºfungen ablegen", "Nur √úberstunden"], "BBiG ¬ß 13 ff."],
    ["Pflichten des Ausbildenden laut BBiG?", "Ausbildungsmittel, Ausbildungsplan, Freistellung Berufsschule", ["Nur Lohn zahlen", "Keine Pflichten", "Nur Pr√ºfungsanmeldung"], "BBiG ¬ß 14."],
    ["Was regelt ein Tarifvertrag?", "Arbeitsentgelte, Arbeitszeit, Bedingungen", ["Nur Urlaubsliste", "Nur Hygienepl√§ne", "Nur Organigramm"], "Zwischen Gewerkschaft und Arbeitgeberverband/Arbeitgeber."],
    ["Abmahnung ‚Äì Zweck?", "Hinweis auf Pflichtverletzung, Warnfunktion", ["K√ºndigung ist immer sofort", "Nur formlose Notiz", "Nur Lohnabzug"], "Vorstufe zur verhaltensbedingten K√ºndigung."],
    ["Arbeitszeit gem. ArbZG (Regel)?", "8 h/Tag, verl√§ngerbar auf 10 h mit Ausgleich", ["Immer 10 h ohne Ausgleich", "6 h/Tag max.", "Keine Begrenzung"], "¬ß 3 ArbZG."],
    ["Mutterschutz ‚Äì Kerninhalt?", "Besch√§ftigungsverbote/Schutzfristen und K√ºndigungsschutz", ["Nur Lohnk√ºrzung", "Nur Steuerfreiheit", "Nur Urlaub"], "MuSchG."],
    ["Wer tr√§gt Verantwortung f√ºr den Ausbildungsnachweis (Berichtsheft)?", "Der/die Auszubildende (F√ºhrung), Betrieb pr√ºft/freistellt", ["Nur Berufsschule", "Nur Kammer", "Niemand"], "Pflicht des Azubi, Betrieb unterst√ºtzt."],
    ["Wann ist eine fristlose K√ºndigung gerechtfertigt?", "Bei wichtigem Grund (Unzumutbarkeit)", ["Beliebig", "Immer nach 4 Monaten", "Nie"], "¬ß 626 BGB."],
    ["Darf der Urlaub w√§hrend der Berufsschulzeit gestrichen werden?", "Urlaub ist grunds√§tzlich zu gew√§hren, Berufsschultage sind zu ber√ºcksichtigen", ["Immer streichen", "Nie gew√§hren", "Nur sonntags"], "Urlaub und Berufsschule sind abzustimmen."],
    ["Beteiligte Interessenvertretung im Betrieb?", "Betriebsrat (wo vorhanden)", ["Agentur f√ºr Arbeit", "Krankenkasse", "BG"], "Mitbestimmung nach BetrVG."],
    ["Ziel der Ausbildungsordnung (AO)?", "Regelt Inhalte, Dauer, Pr√ºfungen", ["Nur Urlaubsplanung", "Nur Arbeitsvertr√§ge", "Nur Steuern"], "AO legt Rahmen der Ausbildung fest."]
  ],
  "Wirtschaftsgrundlagen & Betrieb": [
    ["Was passiert bei steigendem Angebot, konstanter Nachfrage?", "Preis sinkt tendenziell", ["Preis steigt", "Nachfrage sinkt automatisch", "Keine Ver√§nderung m√∂glich"], "Marktmechanismus von Angebot/Nachfrage."],
    ["Welche Rechtsform haftet grunds√§tzlich nicht mit Privatverm√∂gen?", "GmbH", ["Einzelunternehmen", "OHG", "GbR"], "GmbH haftet mit Gesellschaftsverm√∂gen."],
    ["Aufbauorganisation bedeutet ‚Ä¶", "Strukturen, Stellen, Hierarchien (Organigramm)", ["Tagesabl√§ufe", "Reinigungsplan", "Urlaubsplan"], "Abgrenzung zur Ablauforganisation (Prozesse)."],
    ["Ziel der Qualit√§tssicherung (QS)?", "Standardisierung, gleichbleibende Qualit√§t", ["Nur Werbung", "Nur IT-Sicherheit", "Nur Lohnbuchhaltung"], "SOPs, Doku, Audits, Schulung."],
    ["Kostenstelle ‚Äì was ist das?", "Ort der Kostenentstehung", ["Bankkonto", "Steuerbescheid", "Privatverm√∂gen"], "Element der Kostenrechnung."],
    ["Liquidit√§t meint ‚Ä¶", "Zahlungsf√§higkeit", ["Gewinnh√∂he", "Lagerreichweite", "Steuerklasse"], "Unternehmen muss jederzeit zahlen k√∂nnen."],
    ["Welche Aussage zu Skonto ist korrekt?", "Preisnachlass bei Zahlung innerhalb Frist", ["Strafgeb√ºhr", "Einmalzahlung", "gesetzliche Steuer"], "Handels√ºbliche Kondition."],
    ["Deckungsbeitrag beschreibt ‚Ä¶", "Erl√∂s ‚àí variable Kosten", ["Umsatz ‚àí Fixkosten", "Gewinn ‚àí Steuer", "Lagerwert ‚àí Abschreibung"], "Kennzahl zur Sortimentssteuerung."],
    ["Inventur ist ‚Ä¶", "k√∂rperliche Bestandsaufnahme", ["Wareneingangsbuch", "Renditerechnung", "Preislistenpr√ºfung"], "Mind. einmal j√§hrlich."],
    ["Was ist Abschreibung (AfA)?", "Wertminderung √ºber Nutzungsdauer", ["Sofortige Steuerzahlung", "Preisaufschlag", "Privatausgabe"], "Planm√§√üige Verteilung der Anschaffungskosten."],
    ["Wof√ºr steht ROI?", "Return on Investment", ["Rate of Inflation", "Remainder of Income", "Reduction of Inventory"], "Kennzahl zur Rentabilit√§t."],
    ["Break-even-Point ist erreicht, wenn ‚Ä¶", "Erl√∂se = Gesamtkosten", ["Gewinn = 0 und Umsatz = 0", "Lager = 0", "Steuerlast = 0"], "Schwelle zur Gewinnzone."],
    ["Welche Aussage zur Lagerhaltung ist korrekt?", "Sichert Lieferf√§higkeit, bindet aber Kapital", ["Nur Vorteile", "Keine Kosten", "Nur gesetzlich"], "Trade-off zwischen Servicegrad und Kosten."],
    ["Was ist ein SOP?", "Standard Operating Procedure (Arbeitsanweisung)", ["Softwarepaket", "Steuerformular", "Tarifvertrag"], "Teil des QS-Systems."]
  ],
  "Arbeitsschutz & Hygiene": [
    ["Gef√§hrdungsbeurteilung bedeutet ‚Ä¶", "Risiken systematisch ermitteln/bewerten", ["Urlaubsplanung", "Kundenwerbung", "Steueranmeldung"], "Grundlage f√ºr Schutzma√ünahmen."],
    ["PSA umfasst ‚Ä¶", "Schutzkleidung, Handschuhe, Schutzbrille", ["B√ºrostuhl", "Kalender", "Tastatur"], "Personenbezogener Schutz."],
    ["Wer meldet meldepflichtige Arbeitsunf√§lle?", "Arbeitgeber an die BG", ["Arbeitnehmer an die GKV", "Finanzamt", "Niemand"], "Meldepflicht des AG."],
    ["H√§ndehygiene ist wichtig, weil ‚Ä¶", "Infektionen verhindert werden", ["Nur optischer Effekt", "Unwichtig", "Nur im Winter relevant"], "Zentrale Pr√§ventionsma√ünahme."],
    ["Notfallplan regelt ‚Ä¶", "Abl√§ufe/Verantwortlichkeiten im Gefahrenfall", ["Urlaub", "Werbung", "Einkaufsliste"], "F√ºr schnelle, sichere Reaktion."],
    ["Unterweisungspflicht bedeutet ‚Ä¶", "AG unterweist Besch√§ftigte regelm√§√üig", ["Nur auf Wunsch", "Nur schriftlich", "Nur bei Azubis"], "Pflicht nach ArbSchG/DGUV-Vorschriften."],
    ["Hautschutzplan beinhaltet ‚Ä¶", "Schutz-/Pflege-/Reinigungsma√ünahmen", ["Lohnabrechnung", "Steuertabelle", "Dienstwagenordnung"], "Teil des Arbeitsschutzes."],
    ["Abfallbeh√§lter f√ºr infekti√∂sen Abfall ‚Ä¶", "gekennzeichnet, dicht, sicher verschlie√übar", ["offen", "ohne Kennzeichnung", "Hausm√ºllbeutel"], "Vorgaben nach Abfallrecht/Infektionsschutz."],
    ["Im Nadelstichfall ‚Ä¶", "Sofortma√ünahmen + Meldung + BG-Dokumentation", ["abwarten", "nur Pflaster", "keine Meldung"], "Postexpositionsprozedur beachten."],
    ["Gefahrstoffe erfordern ‚Ä¶", "Kennzeichnung, Betriebsanweisung, Lagerregeln", ["nur Hausm√ºllentsorgung", "keine Dokumentation", "nur m√ºndliche Hinweise"], "CLP/GHS beachten."]
  ],
  "Datenschutz & Kommunikation": [
    ["Patientendaten d√ºrfen weitergegeben werden, wenn ‚Ä¶", "Einwilligung oder gesetzliche Grundlage vorliegt", ["immer frei", "nie", "nur an Bekannte"], "DSGVO/Schweigepflicht."],
    ["Schweigepflicht bedeutet ‚Ä¶", "Geheimhaltung patientenbezogener Informationen", ["Verbot interner Kommunikation", "nur Empfehlung", "nur bei Minderj√§hrigen"], "Berufsrechtlich bindend."],
    ["Gute Kommunikation am Empfang umfasst ‚Ä¶", "aktives Zuh√∂ren, klare Sprache, freundlicher Ton", ["Fachjargon ohne Erkl√§rung", "Ignorieren", "Schroffheit"], "Serviceorientierter Umgang."],
    ["Zweckbindung nach DSGVO hei√üt ‚Ä¶", "Daten nur f√ºr festgelegte Zwecke", ["f√ºr alle Zwecke", "f√ºr Werbung freigegeben", "frei handelbar"], "Verarbeitungszweck muss feststehen."],
    ["Datensparsamkeit bedeutet ‚Ä¶", "nur notwendige Daten erheben/verarbeiten", ["m√∂glichst viele Daten", "Daten doppelt erfassen", "alles in CC"], "Grundsatz der DSGVO."],
    ["Technische/organisatorische Ma√ünahmen (TOM) sind ‚Ä¶", "Sicherheitsma√ünahmen (z. B. Zugriff, Verschl√ºsselung)", ["Marketing", "Arbeitsvertrag", "Urlaubsplan"], "Sch√ºtzen Vertraulichkeit/Integrit√§t/Verf√ºgbarkeit."],
    ["Auskunftsrecht hei√üt ‚Ä¶", "Betroffene erhalten Auskunft zu gespeicherten Daten", ["nur Beh√∂rden", "nur intern", "nie"], "Art. 15 DSGVO."]
  ],
  "Umwelt & Entsorgung": [
    ["Infekti√∂ser Abfall ist ‚Ä¶", "getrennt und vorschriftsgem√§√ü zu entsorgen", ["Hausm√ºll", "Toilette", "frei"], "Sichere Sammlung/Kennzeichnung erforderlich."],
    ["Gefahrstoffkennzeichnung dient ‚Ä¶", "Vermeidung von Fehlanwendung/Unf√§llen", ["nur Optik", "nicht n√∂tig", "nur Lagerkosten"], "GHS/CLP-Kennzeichnung beachten."],
    ["Was beschreibt Recycling?", "R√ºckf√ºhrung von Stoffen in den Kreislauf", ["Verbrennung", "Deponie ohne Verwertung", "Illegale Entsorgung"], "Schonung von Ressourcen/Umwelt."],
    ["Ziel von Energiesparen in der Praxis?", "Kosten senken, Umwelt schonen", ["nur Marketing", "nur Pflichten", "keine Wirkung"], "Nachhaltige Betriebsf√ºhrung."]
  ]
};

/* --- Add-on: Sozialversicherung (zus√§tzliche Fragen) --- */
SEEDS["Sozialversicherung"].push(
  ["Wer ist Tr√§ger der gesetzlichen Pflegeversicherung?","Die Krankenkassen",["Berufsgenossenschaften","Rentenversicherung","Finanzamt"],"Die Pflegeversicherung ist organisatorisch an die Krankenkassen angegliedert."],
  ["Welche Voraussetzung gilt f√ºr den Bezug von Krankengeld?","Arbeitsunf√§higkeit l√§nger als 6 Wochen nach EFZG-Zeitraum",["Ab dem ersten Krankheitstag","Nur bei Unf√§llen","Nur bei Privatversicherten"],"Nach 6 Wochen endet die Entgeltfortzahlung und das Krankengeld greift."],
  ["Was bedeutet Beitragsbemessungsgrenze?","Obergrenze des versicherungspflichtigen Einkommens",["Mindestlohn","Steuerfreibetrag","Pf√§ndungsgrenze"],"Nur bis zu dieser Grenze werden Beitr√§ge berechnet."],
  ["Wer ist in der Rentenversicherung pflichtversichert?","Arbeitnehmer*innen und Auszubildende",["Selbstst√§ndige immer","Nur Beamte","Nur Minijobber"],"Pflichtversicherung gilt f√ºr alle Besch√§ftigten mit Entgelt."],
  ["Welche Leistung gew√§hrt die Arbeitslosenversicherung?","Arbeitslosengeld I",["Wohngeld","Kindergeld","Pflegegeld"],"Anspruch nach ¬ß 136 ff. SGB III."]
);

/* --- Add-on: Lohn & Steuern (zus√§tzliche Fragen + Rechenmix) --- */
SEEDS["Lohn & Steuern"].push(
  ["Was beschreibt das Prinzip der Progression?","Steuer steigt √ºberproportional mit Einkommen",["Alle zahlen denselben Prozentsatz","Nur Arbeitgeber zahlen","Progression bedeutet R√ºckzahlung"],"Grundsatz des Einkommensteuerrechts."],
  ["Was geh√∂rt zu den gesetzlichen Abz√ºgen eines Azubis?","Renten-, Kranken-, Pflege-, Arbeitslosenversicherung",["Kirchensteuer","Verm√∂genswirksame Leistungen","Pflichtmitgliedsbeitrag Kammer"],"Nur Sozialversicherungsabgaben sind gesetzlich vorgeschrieben."],
  ["Was ist der Kinderfreibetrag?","Steuerfreier Betrag zur Entlastung von Eltern",["Zuschuss der GKV","AG-Pflichtbeitrag","Teil der Unfallversicherung"],"Ber√ºcksichtigt das Existenzminimum der Kinder."],
  ["Welche Bedeutung hat das K√ºrzel SV-Nachweis?","Belegt abgef√ºhrte SV-Beitr√§ge des Arbeitgebers",["Best√§tigt Urlaubsanspruch","Nachweis f√ºr Finanzamt","Nur intern"],"Teil der Entgeltabrechnungs-Dokumentation."],
  ["Wie hoch ist der Arbeitnehmeranteil an der Rentenversicherung (Stand 2025)?","9,3 %",["4,5 %","18,6 %","12 %"],"Gesamt 18,6 % ‚Üí h√§lftig je Partei."],
  ["Welche Aussage zur Lohnsteuerklasse VI stimmt?","F√ºr Nebenbesch√§ftigungen ohne Hauptarbeitsverh√§ltnis",["F√ºr Ehepaare","F√ºr Studierende","F√ºr Rentner"],"Immer wenn keine ELStAM vorliegen."],
  ["Welche Leistung zahlt die Agentur f√ºr Arbeit bei Mutterschutz nicht?","Mutterschaftsgeld",["Arbeitslosengeld","Kurzarbeitergeld","Vermittlungszuschuss"],"Mutterschaftsgeld kommt von der Krankenkasse."],
  ["Was ist verm√∂genswirksame Leistung (VL)?","Arbeitgeberleistung zum Verm√∂gensaufbau",["Sonderzahlung","Steuerr√ºckzahlung","Urlaubsbonus"],"Z. B. in Sparvertrag oder Bausparen."],
  ["Berechne den Monatsnettolohn: Brutto 3 000 ‚Ç¨, Abz√ºge 31 %.","2069,00 ‚Ç¨",["2190 ‚Ç¨","2300 ‚Ç¨","2450 ‚Ç¨"],"3 000 √ó 0,69 = 2 070 ‚Ç¨ (gerundet)."],
  ["Wie hoch ist die Kirchensteuer (in % der Lohnsteuer) in Hessen?","9 %",["5 %","7 %","10 %"],"Landessatz Hessen 9 %."],
  ["Was versteht man unter Solidarit√§tszuschlag?","Erg√§nzungsabgabe zur Einkommensteuer",["Pflicht zur UV","Kammerbeitrag","Pflichtbeitrag GKV"],"Wird meist automatisch mit LSt einbehalten."]
);

/* --- Add-on: Ausbildungs- & Arbeitsrecht (zus√§tzliche Fragen) --- */
SEEDS["Ausbildungs- & Arbeitsrecht"].push(
  ["Was regelt das Berufsbildungsgesetz (BBiG)?","Rechte & Pflichten in der Berufsausbildung",["Urlaubsplanung","Steuertarife","Krankenversicherung"],"Zentrale gesetzliche Grundlage der Ausbildung."],
  ["Wer kontrolliert Ausbildungsbetriebe regelm√§√üig?","Zust√§ndige Kammern (z. B. Tier√§rztekammer)",["Finanzamt","Arbeitsamt","BG"],"√úberwachen Eignung und Ausbildungsnachweise."],
  ["Wie lange dauert in der Regel die t√§gliche Ruhezeit nach Arbeitszeitende?","Mindestens 11 Stunden",["8 Stunden","9 Stunden","10 Stunden"],"¬ß 5 ArbZG."],
  ["Wann ist Mehrarbeit bei Azubis erlaubt?","Nur in Ausnahmef√§llen mit Ausgleich",["Immer","Nie","Nur auf Wunsch"],"Grundsatz: Ausbildung geht vor, Ausgleich notwendig."],
  ["Wann muss der Ausbildungsvertrag sp√§testens schriftlich vorliegen?","Vor Beginn der Ausbildung",["Innerhalb 4 Wochen","Nach Probezeit","Nach Berufsschulstart"],"Formpflicht vor Arbeitsaufnahme."],
  ["Welche Aussage zum Jugendarbeitsschutzgesetz ist richtig?","Sch√ºtzt Besch√§ftigte < 18 Jahren durch Arbeitszeit- und Pausenregelungen",["Gilt f√ºr alle","Nur f√ºr √ºber 18","Nur f√ºr Ausbilder"],"JArbSchG gilt f√ºr Jugendliche."],
  ["Wie lange d√ºrfen Jugendliche t√§glich h√∂chstens besch√§ftigt werden?","8 Stunden",["6","9","10"],"¬ß 8 JArbSchG."],
  ["Wann endet das Berufsausbildungsverh√§ltnis regul√§r?","Mit Bestehen der Abschlusspr√ºfung",["Nach 3 Jahren","Nach Zeugnis","Mit Probezeitende"],"BBiG ¬ß 21."],
  ["Was ist bei einer K√ºndigung w√§hrend der Probezeit n√∂tig?","Keine Frist, aber Schriftform",["M√ºndlich","Immer 2 Wochen Frist","Kammergenehmigung"],"BBiG ¬ß 22."],
  ["Wann besteht Anspruch auf ein Arbeitszeugnis?","Bei Beendigung des Arbeitsverh√§ltnisses",["Nur auf Wunsch","Nie","Nur bei unbefristeten Vertr√§gen"],"¬ß 109 GewO."]
);

/* --- Add-on: Wirtschaftsgrundlagen & Betrieb (zus√§tzliche Fragen) --- */
SEEDS["Wirtschaftsgrundlagen & Betrieb"].push(
  ["Was beschreibt das magische Viereck der Wirtschaftspolitik?","Stabiles Preisniveau, hoher Besch√§ftigungsstand, au√üenwirtschaftliches Gleichgewicht, stetiges Wachstum",["Hohe Preise, Arbeitslosigkeit, Au√üenhandel, Staatsschulden","Nur Wirtschaftswachstum","Nur stabile Preise"],"¬ß 1 StabG ‚Äì vier gleichrangige Ziele."],
  ["Was ist der Unterschied zwischen Kosten und Ausgaben?","Kosten = betrieblicher Werteverzehr, Ausgaben = Geldabfluss",["Beides identisch","Kosten sind nur Steuern","Ausgaben nur kalkulatorisch"],"Kostenbegriff ist betriebswirtschaftlich enger."],
  ["Welche Funktion hat die Buchf√ºhrung?","Dokumentation, Kontrolle, Information, Rechenschaft",["Nur Steuerberechnung","Nur f√ºr Werbung","Nur interne Planung"],"Grundlage des Jahresabschlusses."],
  ["Was bedeutet Liquidit√§t 2. Grades?","(Fl√ºssige Mittel + Forderungen) / kurzfristige Verbindlichkeiten",["Gesamtkapital / Umsatz","Gewinn / Umsatz","Nur Bankguthaben"],"Kennzahl zur kurzfristigen Zahlungsf√§higkeit."],
  ["Wie wirken sich Abschreibungen auf den Gewinn aus?","Sie mindern den Gewinn",["Sie erh√∂hen den Gewinn","Keine Auswirkung","Nur bilanziell relevant"],"Aufwand, keine Auszahlung, aber gewinnmindernd."],
  ["Was beschreibt der Begriff Cashflow?","Einzahlungs√ºberschuss in einer Periode",["Lagerbestand","Fremdkapital","Anlageverm√∂gen"],"Kennzahl f√ºr Innenfinanzierungskraft."],
  ["Was bedeutet Skonto 3 % bei 10 Tagen?","3 % Preisnachlass bei Zahlung innerhalb 10 Tage",["3 % Aufschlag","Zahlung nach 30 Tagen","Ratenzahlung"],"Handels√ºbliche Zahlungsbedingung."],
  ["Was bedeutet Kalkulation im Handel?","Ermittlung des Verkaufspreises auf Basis von Kosten + Gewinn",["Nur Lagerbewertung","Nur Preisnachlass","Nur Personalplanung"],"Grundlage der Preisgestaltung."],
  ["Wie nennt man den Anteil des Eigenkapitals am Gesamtkapital?","Eigenkapitalquote",["Liquidit√§tsgrad","Cashflow","Kapitalbindung"],"Kennzahl f√ºr Stabilit√§t der Finanzierung."],
  ["Was versteht man unter innerbetrieblichem Vorschlagswesen?","System zur Einreichung von Verbesserungen durch Mitarbeitende",["Tarifvertrag","Beschwerdeverfahren","Urlaubsplan"],"F√∂rdert Motivation und Innovation."]
);

/* --- Add-on: Arbeitsschutz & Hygiene (zus√§tzliche Fragen) --- */
SEEDS["Arbeitsschutz & Hygiene"].push(
  ["Wie h√§ufig sind Unterweisungen zum Arbeitsschutz durchzuf√ºhren?","Mindestens 1√ó j√§hrlich und bei Ver√§nderungen",["Nur alle 5 Jahre","Nur bei Neustart","Nie Pflicht"],"¬ß 12 ArbSchG."],
  ["Wer tr√§gt die Verantwortung f√ºr die Einhaltung von Sicherheitsvorschriften?","Der Arbeitgeber",["Die Mitarbeiter","Die BG","Das Gesundheitsamt"],"Grundverantwortung AG, Mitwirkung AN."],
  ["Was regelt die TRBA 250?","Schutzma√ünahmen bei T√§tigkeiten mit biologischen Arbeitsstoffen",["Brandschutz","Steuerrecht","Hygienekleidung"],"Technische Regel Biologische Arbeitsstoffe."],
  ["Welche Aussage zu Gefahrstoffetiketten ist korrekt?","Piktogramme und Signalw√∂rter m√ºssen gut sichtbar sein",["Farben frei w√§hlbar","Nur Text","Nie Pflicht"],"CLP-Verordnung verlangt Kennzeichnung."],
  ["Was beschreibt der Begriff Ergonomie?","Anpassung der Arbeitsbedingungen an den Menschen",["Anpassung Mensch an Maschine","Nur Design","Nur Arbeitszeit"],"Ziel: gesundes Arbeiten durch Gestaltung des Arbeitsplatzes."],
  ["Wie oft m√ºssen Erste-Hilfe-K√§sten kontrolliert werden?","Regelm√§√üig (z. B. halbj√§hrlich) und nach Verbrauch",["Nur bei Unfall","Nie","T√§glich"],"Verantwortung Betrieb / Sicherheitsbeauftragter."],
  ["Was ist nach einem Stichverletzungsunfall sofort zu tun?","Wunde ausdr√ºcken / desinfizieren / melden / BG-Dokumentation",["Abwarten","Verbinden und vergessen","Nur Arztbesuch nach 1 Woche"],"Postexpositionsprophylaxe unverz√ºglich einleiten."],
  ["Welche Dokumente regeln Hygieneprozesse in Praxen?","Hygiene- und Desinfektionspl√§ne sowie SOPs",["Steuerakte","Urlaubsplan","Tarifregister"],"Pflicht nach IfSG und RKI-Empfehlungen."]
);

/* --- Add-on: Datenschutz & Kommunikation (zus√§tzliche Fragen) --- */
SEEDS["Datenschutz & Kommunikation"].push(
  ["Wann d√ºrfen Praxisdaten an Dritte weitergegeben werden?","Nur mit Einwilligung oder gesetzlicher Grundlage",["Immer","Nie","Bei Freunden"],"¬ß 203 StGB / Art. 6 DSGVO."],
  ["Was bedeutet Vertraulichkeit nach DSGVO?","Daten sind vor unbefugtem Zugriff zu sch√ºtzen",["Daten sollen geteilt werden","Offenheit gegen√ºber allen","Nur Papierakten"],"Technisch-organisatorische Ma√ünahmen erforderlich."],
  ["Was ist ein Auftragsverarbeitungsvertrag (AVV)?","Vertrag zwischen Praxis und externem Dienstleister zur Datenverarbeitung",["Internes Memo","Mietvertrag","Urlaubsplan"],"Art. 28 DSGVO regelt Pflichten des Auftragsverarbeiters."],
  ["Was beschreibt das Prinzip der Datenminimierung?","Nur so viele Daten wie n√∂tig erheben",["Alle Daten sammeln","Mehr ist besser","Doppelte Erfassung"],"Grundsatz der Datenschutz-Grundverordnung."],
  ["Was gilt bei Kommunikationsfehlern im Team?","Fehler sachlich ansprechen und l√∂sungsorientiert kl√§ren",["Ignorieren","Anschreien","Vorwurf ohne L√∂sung"],"Konstruktives Feedback f√∂rdert Zusammenarbeit."],
  ["Was ist aktive Zuh√∂ren?","Nachfragen, Paraphrasieren und Signalisieren von Aufmerksamkeit",["Monolog","Abwarten","√úberreden"],"Wichtige Kommunikationstechnik in der Praxis."]
);

/* --- Add-on: Umwelt & Entsorgung (zus√§tzliche Fragen) --- */
SEEDS["Umwelt & Entsorgung"].push(
  ["Welche Abfallart darf nicht √ºber den Hausm√ºll entsorgt werden?","Altmedikamente mit Gefahrstoffsymbol",["Papier","Verpackungen","Karton"],"Gefahrstoffhaltige Abf√§lle getrennt entsorgen."],
  ["Wie werden scharfe / spitze Instrumente entsorgt?","In bruch- und stichfesten Beh√§ltern",["In M√ºllbeutel","Mit Hausm√ºll","Im Abfluss"],"Gef√§hrdung vermeiden ‚Üí Sicherheitsbeh√§lter."],
  ["Was bedeutet Abfallhierarchie nach KrWG?","Vermeidung ‚Üí Wiederverwendung ‚Üí Recycling ‚Üí Verwertung ‚Üí Beseitigung",["Sammeln ‚Üí Verbrennen","Nur Recycling","Keine Reihenfolge"],"Gesetzliche Priorit√§tenfolge ¬ß 6 KrWG."],
  ["Welche Ma√ünahme reduziert Energieverbrauch in der Praxis?","LED-Beleuchtung und Abschalten von Ger√§ten nach Betriebsschluss",["Ger√§te dauerhaft an","Fenster offen lassen","Mehr Drucke machen"],"Teil des energetischen Umweltschutzes."]
);

/* --- Add-on: Zus√§tzliche Rechenaufgaben --- */
NUMERIC_TASKS.push(
  ["Lohn & Steuern","Berechne den AG-Anteil zur Sozialversicherung bei Brutto 3 200 ‚Ç¨, AG-Anteil 20 %",3200*0.20,1.0,"‚Ç¨","3 200 √ó 0,20 = 640 ‚Ç¨ AG-Anteil."],
  ["Lohn & Steuern","Krankenkassen-Zusatzbeitrag 1,6 % auf Brutto 2 800 ‚Ç¨ ‚Üí Betrag?",2800*0.016,2.0,"‚Ç¨","2 800 √ó 0,016 = 44,80 ‚Ç¨."],
  ["Wirtschaftsgrundlagen & Betrieb","Rabatt 5 % auf 200 ‚Ç¨, Skonto 2 % ‚Üí Zahlbetrag?",200*0.95*0.98,1.0,"‚Ç¨","200 √ó 0,95 √ó 0,98 = 186,20 ‚Ç¨."],
  ["Wirtschaftsgrundlagen & Betrieb","Kostenrechnung: Erl√∂s 5 000 ‚Ç¨, variable Kosten 3 000 ‚Ç¨, DB?",5000-3000,0.1,"‚Ç¨","5 000 ‚àí 3 000 = 2 000 ‚Ç¨ Deckungsbeitrag."],
  ["Arbeitsschutz & Hygiene","Schutzhandschuhe Kosten 3,20 ‚Ç¨/Paar, 50 Paar / Monat ‚Üí Monatskosten?",3.20*50,0.1,"‚Ç¨","3,20 √ó 50 = 160 ‚Ç¨."]
);

/* --- Praxis-Add-on: Umwelt & Entsorgung --- */
SEEDS["Umwelt & Entsorgung"].push(
  ["Wie werden gebrauchte Kan√ºlen mit Blutresten entsorgt?","In stichfesten, verschlossenen Einwegbeh√§ltern f√ºr infekti√∂sen Abfall",["Im Restm√ºll","In Kartons","Im Glascontainer"],"Gef√§hrdung durch Stichverletzung vermeiden ‚Äì Sammelbeh√§lter verwenden."],
  ["Welche Kennzeichnung tr√§gt infekti√∂ser Abfall nach LAGA-Klassifikation?","Abfallschl√ºssel 18 01 03*",["17 02 01","18 02 02","15 01 01"],"Abf√§lle aus Behandlung von Menschen und Tieren, die infekti√∂s sind."],
  ["Wie werden R√∂ntgenchemikalien umweltgerecht entsorgt?","√úber zugelassene Spezialentsorger f√ºr Gefahrstoffe",["√úber Toilette","√úber Sp√ºlbecken","Mit Hausm√ºll"],"Fixierer und Entwickler enthalten Schwermetalle, Sonderabfall."],
  ["Was beschreibt das Prinzip der Kreislaufwirtschaft?","Ressourcen schonen durch Wiederverwendung und Recycling",["Abfalllagerung","Verbrennung","Export"],"Ziel des KrWG: Abfall vermeiden, Stoffkreisl√§ufe schlie√üen."],
  ["Was z√§hlt zu Ma√ünahmen nachhaltiger Praxisf√ºhrung?","Energieeffiziente Ger√§te, digitale Dokumentation, Recyclingpapier",["Mehr Drucke","Stand-by-Modus dauerhaft","Einmalartikel ohne Not"],"Nachhaltigkeit senkt Kosten und sch√ºtzt Umwelt."]
);

/* --- Praxis-Add-on: Datenschutz & Kommunikation --- */
SEEDS["Datenschutz & Kommunikation"].push(
  ["Welche Ma√ünahme sch√ºtzt Patientendaten am Empfang am besten?","Bildschirm so aufstellen, dass Patienten keine Daten einsehen k√∂nnen",["Alle Daten offen zeigen","Akten im Wartezimmer ablegen","Passwort auf Zettel notieren"],"Datenschutz durch physische Barrieren und Sichtschutz."],
  ["Wann d√ºrfen Mitarbeiter private Smartphones in der Praxis nutzen?","Nur wenn dienstliche Daten sicher getrennt und genehmigt sind",["Immer","Nie","Nur mit Kamerafunktion"],"BYOD erfordert klare Regeln und Datenschutzkonzept."],
  ["Wie reagierst du bei unklaren Telefonanfragen zu Patientendaten?","Keine Auskunft ohne Identit√§tspr√ºfung oder schriftliche Einwilligung",["Immer Auskunft geben","Nur Vornamen nennen","Daten per SMS schicken"],"Datenschutz vor Service ‚Äì Schweigepflicht geht vor."]
);

/* --- Praxis-Add-on: Arbeitsschutz & Hygiene --- */
SEEDS["Arbeitsschutz & Hygiene"].push(
  ["Welche Pflicht gilt f√ºr Besch√§ftigte bei Schutzkleidung?","Schutzkleidung ordnungsgem√§√ü tragen und pflegen",["Nur bereithalten","Nur bei Kontrolle tragen","Nie waschen"],"Pflicht zur Mitwirkung am Arbeitsschutz."],
  ["Wie oft ist eine Hygienebegehung in der Tierarztpraxis empfohlen?","Mindestens einmal j√§hrlich",["Nur bei Beschwerden","Nie","Monatlich zwingend"],"Regelm√§√üige Eigen- oder Fremdbegehung √ºberpr√ºft Hygienestandards."],
  ["Welche Ma√ünahme senkt Infektionsrisiken im Behandlungsraum?","Tragen von Handschuhen und Fl√§chendesinfektion nach jedem Tier",["Nur L√ºften","Nur Maskenpflicht","Nur H√§ndewaschen am Tagesende"],"Standardhygiene nach RKI-Empfehlungen."]
);

/* --- Praxis-Add-on: Lohn & Steuern (Rechenaufgaben & Theorie) --- */
SEEDS["Lohn & Steuern"].push(
  ["Ein/e TFA erh√§lt 2 700 ‚Ç¨ brutto. Wie hoch ist die Arbeitnehmer-Rentenversicherung bei 9,3 %?", "251,10 ‚Ç¨", ["240 ‚Ç¨","270 ‚Ç¨","300 ‚Ç¨"], "2 700 √ó 0,093 = 251,10 ‚Ç¨."],
  ["Bruttolohn 2 400 ‚Ç¨, Abz√ºge 32 % ‚Üí Nettolohn?", "1 632 ‚Ç¨", ["1 680 ‚Ç¨","1 700 ‚Ç¨","1 500 ‚Ç¨"], "2 400 √ó 0,68 = 1 632 ‚Ç¨."],
  ["Wie werden verm√∂genswirksame Leistungen (VL) steuerlich behandelt?","Als Bestandteil des Bruttolohns",["Immer steuerfrei","Nur SV-frei","Nicht meldepflichtig"],"VL z√§hlen zum Arbeitsentgelt."],
  ["Wie wird das Krankengeld finanziert?","Aus Beitr√§gen der gesetzlichen Krankenversicherung",["Vom Arbeitgeber allein","Vom Staat","Von den Kammern"],"Finanzierungsgemeinschaft der Versicherten."],
  ["Eine TFA arbeitet an 3 Samstagen je 5 h. Wie werden diese Stunden verg√ºtet?","Je nach Vertrag oder Tarifvertrag ‚Äì Zuschl√§ge m√∂glich",["Immer ohne Lohn","Nur Freizeitausgleich","Immer 200 %"],"Praxisabh√§ngig, ggf. Tarifregelung beachten."]
);

/* --- Praxis-Add-on: Ausbildungs- & Arbeitsrecht --- */
SEEDS["Ausbildungs- & Arbeitsrecht"].push(
  ["Eine Auszubildende erscheint wiederholt zu sp√§t. Wie sollte der Betrieb reagieren?","Erst Gespr√§ch, dann ggf. schriftliche Abmahnung",["Sofort K√ºndigung","Ignorieren","Lohnk√ºrzung"],"Grundsatz der Verh√§ltnism√§√üigkeit ‚Äì p√§dagogisch handeln."],
  ["Ein Azubi ist minderj√§hrig. Wer unterschreibt den Ausbildungsvertrag mit?","Erziehungsberechtigte",["Berufsschule","Kammer","Lehrkraft"],"Minderj√§hrige brauchen Zustimmung der Eltern (¬ß10 BBiG)."],
  ["Wann muss der Betrieb den Ausbildungsnachweis pr√ºfen?","Regelm√§√üig, sp√§testens vor der Zulassung zur Pr√ºfung",["Nie","Nur bei Beschwerden","Nur bei Probezeitende"],"Pflicht nach ¬ß 14 BBiG."],
  ["Was passiert, wenn die Abschlusspr√ºfung nicht bestanden wird?","Verl√§ngerung des Ausbildungsvertrags auf Wunsch bis zur Wiederholungspr√ºfung",["Sofortige K√ºndigung","Neuer Vertrag n√∂tig","Kein Anspruch"],"¬ß 21 Abs. 3 BBiG erlaubt Verl√§ngerung."],
  ["Was ist bei √úberstunden von Azubis zu beachten?","Nur ausbildungsbezogen, freiwillig und mit Ausgleich",["Immer Pflicht","Nur bei Krankheit anderer","Nie erlaubt"],"BBiG + JArbSchG: Ausbildung geht vor Produktivit√§t."],
  ["Wie lange betr√§gt die t√§gliche Pause bei 8-Stunden-Tag laut ArbZG?","Mindestens 30 Minuten",["15 Min","45 Min","60 Min"],"¬ß 4 ArbZG: 30 Min bei 6‚Äì9 h Arbeitszeit."],
  ["Wann besteht Anspruch auf Ausbildungsverg√ºtung?","Ab Beginn der Ausbildung laut Vertrag",["Nach Probezeit","Nach Berufsschule","Nach 6 Monaten"],"¬ß 17 BBiG."],
  ["Wer meldet den Azubi zur Zwischenpr√ºfung an?","Der Ausbildungsbetrieb",["Die Berufsschule","Der Azubi selbst","Die Kammer"],"Pflicht des Ausbildenden laut Pr√ºfungsordnung."],
  ["Darf ein Azubi alleine ohne Aufsicht Narkosemittel aufziehen?","Nein, nur unter Anleitung und Aufsicht",["Ja, immer","Nur bei Routine","Nur mit Unterschrift"],"Pflicht zur Anleitung nach ¬ß 14 BBiG + TFG-Sorgfaltspflicht."],
  ["Was gilt bei Krankheit des Azubis?","Unverz√ºgliche Krankmeldung und Vorlage der AU-Bescheinigung",["Erst nach 3 Tagen","Nie n√∂tig","Nur bei Schulfehltagen"],"Pflicht zur Mitteilung laut ¬ß 13 BBiG."]
);

/* --- Praxis-Add-on: Wirtschaftsgrundlagen & Betrieb --- */
SEEDS["Wirtschaftsgrundlagen & Betrieb"].push(
  ["Was ist der Unterschied zwischen Einnahmen und Ertrag?","Einnahme = Geldzufluss, Ertrag = wertm√§√üige Leistung einer Periode",["Beides gleich","Ertrag = Kassensaldo","Einnahme = Umsatzsteuer"],"Betriebswirtschaftlicher Grundbegriff."],
  ["Welche Kostenart geh√∂rt zu den Fixkosten?","Praxis-Miete",["Tierfutter","Materialverbrauch","Strom nach Nutzung"],"Fixkosten sind mengenunabh√§ngig."],
  ["Wie kann eine Tierarztpraxis Liquidit√§t verbessern?","Durch fr√ºhzeitige Rechnungsstellung und konsequentes Mahnwesen",["Sp√§te Zahlung","Mehr Lagerbestand","Mehr Urlaubszeiten"],"Schneller Geldeingang sichert Zahlungsf√§higkeit."],
  ["Warum ist eine Inventur wichtig?","Zur √úberpr√ºfung des tats√§chlichen Warenbestands",["Nur Steuerpr√ºfung","Nur Statistik","Nur Preisvergleich"],"Pflicht mindestens einmal j√§hrlich (¬ß 240 HGB)."],
  ["Welche Aufgabe hat die Kostenstellenrechnung?","Ermittlung, wo Kosten im Betrieb anfallen",["Nur Steuerermittlung","Nur Einkaufspreise","Nur Privatkosten"],"Hilft bei Wirtschaftlichkeitskontrolle."],
  ["Was versteht man unter innerbetrieblicher Leistungsverrechnung?","Verrechnung von Leistungen zwischen Abteilungen",["Verkauf an Kunden","Zahlung an Finanzamt","Lohnzahlung"],"z. B. Labor ‚Üí Behandlungsraum."],
  ["Wie berechnet man den Reingewinn?","Umsatz ‚àí Kosten",["Kosten ‚àí Umsatz","Gewinn ‚àí Steuern","Umsatz + Kosten"],"Grundformel des Erfolgsvergleichs."],
  ["Wie werden Medikamente im Lager bewertet?","Nach Einkaufspreis (Anschaffungskosten)",["Nach Verkaufspreis","Nach Marktpreis","Gar nicht"],"Bewertung zu Anschaffungskosten nach HGB."],
  ["Wie nennt man den Punkt, an dem Einnahmen = Kosten sind?","Break-Even-Point",["Liquidit√§tsgrad","ROI","Cashflow"],"Gewinnschwelle erreicht."],
  ["Welche Ma√ünahme erh√∂ht den Deckungsbeitrag einer Praxis?","Senkung variabler Kosten oder Preiserh√∂hung",["Mehr Fixkosten","Mehr Rabatt","Mehr Personal"],"DB = Erl√∂s ‚àí variable Kosten."]
);


/* ========= Hilfsfunktionen ========= */
function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; }
function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }
function makeMC(topic, q, correct, wrongs, expl){
  const opts = shuffle(wrongs.concat([correct]));
  return {type:"mc", topic, question:q, options:opts, answer:opts.indexOf(correct), explanation:expl};
}

function makeNUM(topic, q, v, tol, unit, ex){
  return {type:"num", topic, question:q, correct_value:+(Math.round(v*100)/100), tolerance_pct:tol, unit, explanation:ex};
}

/* Neuer Generator: zieht ALLE Seeds, nutzt DISTRIB nur f√ºr Pr√ºfungsgewichtung */
function buildQuestionBank() {
  const bank = [];

  for (const topic of TOPICS) {
    const seeds = SEEDS[topic] || [];
    if (!seeds.length) continue;

    // Alle Fragen des Themas √ºbernehmen (keine Begrenzung durch DISTRIB)
    for (const s of seeds) {
      if (!Array.isArray(s) || s.length < 4) continue;
      const [q, c, wr, ex] = s;
      bank.push(makeMC(topic, q, c, wr, ex));
    }
  }

  // Alle Rechenaufgaben hinzuf√ºgen
  for (const n of NUMERIC_TASKS) {
    bank.push(makeNUM(n[0], n[1], n[2], n[3], n[4], n[5]));
  }

  // IDs vergeben
  bank.forEach((q, i) => q.id = i + 1);

  return bank;
}



/* ========= App-State / Elemente ========= */
let QUESTIONS = buildQuestionBank(); // ~220 pro Start
let mode='idle', pool=[], idx=0, score=0, topic='Alle Themen', record=[];
let timerInt=null, cache={};

const home=document.getElementById('home'), quiz=document.getElementById('quizCard'), res=document.getElementById('resultCard');
const qT=document.getElementById('qTopic'), qQ=document.getElementById('qText'), qO=document.getElementById('qOptions'), qN=document.getElementById('qNum'), qE=document.getElementById('qExplain');
const progress=document.getElementById('progress'), timer=document.getElementById('timer');
const topicSel=document.getElementById('topicSel');
const statLast=document.getElementById('statLast'), statAvg=document.getElementById('statAvg'), statErr=document.getElementById('statErr');
const btnLearn=document.getElementById('btnLearn'), btnExam=document.getElementById('btnExam'), btnErr=document.getElementById('btnErrTrain');
const btnBack=document.getElementById('btnBack'), btnNext=document.getElementById('btnNext'), btnExplain=document.getElementById('btnExplain');
const btnHome=document.getElementById('btnHome'), btnHomeTop=document.getElementById('btnHomeTop'), btnPrint=document.getElementById('btnPrint');
const btnErrNow=document.getElementById('btnErrNow'), btnDown=document.getElementById('btnDownload');
const resHead=document.getElementById('resultHead'), resText=document.getElementById('resultText');

/* ========= Local Storage & Utilities ========= */
function save(k,v){ try{ localStorage.setItem(k, JSON.stringify(v)); }catch(e){} }
function load(k,d){ try{ return JSON.parse(localStorage.getItem(k)||JSON.stringify(d)); }catch(e){ return d; } }
function filterTopic(a,t){ return t==='Alle Themen'? a.slice() : a.filter(x=>x.topic===t); }
function grade(p){ return p>=92?1 : p>=81?2 : p>=67?3 : p>=50?4 : p>=30?5 : 6; }
function feedback(g){ return g===1?'Mega stark, Entchen! üíï': g===2?'Sehr gut ‚Äì du bist auf Kurs!': g===3?'Befriedigend ‚Äì solide Leistung!': g===4?'Ausreichend ‚Äì bestanden! Weiter √ºben f√ºrs sichere Gef√ºhl.': g===5?'Knapp verfehlt ‚Äì du packst das beim n√§chsten Mal!':'√úbung macht die Meister-Entchen ‚Äì nicht aufgeben! ü¶Ü'; }
function format2(x){ return (Math.round(x*100)/100).toFixed(2); }

/* ========= Stats ========= */
function updStats(){
  const hist = load('hist', []);
  const errs = load('wrong', []);
  if(!hist.length){
    statLast.textContent = "Noch keine Pr√ºfung gespeichert";
    statAvg.textContent = "";
    statErr.textContent = errs.length? `Fehler offen: ${errs.length} üîÅ` : "";
    btnErr.disabled = !errs.length;
    return;
  }
  const L = hist[hist.length-1];
  statLast.textContent = `Letzte Pr√ºfung: ${L.date} ‚Äì Note ${L.grade} (${L.pct}%) ‚Ä¢ Thema: ${L.topic||'Alle Themen'}`;
  const avg = Math.round(hist.reduce((a,b)=>a+b.pct,0)/hist.length);
  statAvg.textContent = `√ò Leistung: ${avg}% (Note ${grade(avg)}) aus ${hist.length} Pr√ºfungen`;
  statErr.textContent = errs.length? `Fehler offen: ${errs.length} üîÅ` : `Keine offenen Fehler ‚Äì stark!`;
  btnErr.disabled = !errs.length;
}

/* ========= Steuerung ========= */
function startLearn(){
  topic = topicSel.value;

  // Filtere Fragen nach Thema
  const topicPool = filterTopic(QUESTIONS, topic);
  if(!topicPool.length) return alert("Keine Fragen im gew√§hlten Thema.");

  if(topic === 'Alle Themen'){
    // 20 zuf√§llige, gewichtet nach DISTRIB
    const weighted = [];
    for(const t of TOPICS){
      const weight = Math.ceil((DISTRIB[t] / Object.values(DISTRIB).reduce((a,b)=>a+b)) * 20);
      const fromTopic = shuffle(filterTopic(QUESTIONS, t)).slice(0, weight);
      weighted.push(...fromTopic);
    }
    pool = shuffle(weighted).slice(0, 20);
  } else {
    // Einzelthema ‚Üí ALLE Fragen anzeigen (keine Begrenzung)
    pool = shuffle(topicPool);
  }

  mode = 'learn';
  idx = 0;
  score = 0;
  record = [];
  showQuiz();
}



function startExam(){
  topic = topicSel.value;
  const topicPool = filterTopic(QUESTIONS, topic);
  if(!topicPool.length) return alert("Keine Fragen im gew√§hlten Thema.");
  pool = shuffle(shuffle(filterTopic(QUESTIONS, topic))).slice(0, Math.min(30, topicPool.length));
  mode='exam'; idx=0; score=0; record=[];
  timer.classList.remove('hidden');
  let min = 60;
  timer.textContent = `Zeit: ${String(min).padStart(2,'0')}:00`;
  clearInterval(timerInt);
  timerInt = setInterval(()=>{
    if(--min < 0){ clearInterval(timerInt); finish(); return; }
    timer.textContent = `Zeit: ${String(min).padStart(2,'0')}:00`;
  }, 60000);
  showQuiz();
}

function startErr(){
  const wrongIds = load('wrong', []);
  const set = new Set(wrongIds);
  const wrongQs = QUESTIONS.filter(q=>set.has(q.id));
  if(!wrongQs.length){ alert("Keine Fehler offen."); return; }
  mode='learn'; pool=wrongQs; idx=0; score=0; record=[]; showQuiz();
}

function showQuiz(){ home.classList.add('hidden'); res.classList.add('hidden'); quiz.classList.remove('hidden'); render(); }
function backHome(){ clearInterval(timerInt); quiz.classList.add('hidden'); res.classList.add('hidden'); home.classList.remove('hidden'); timer.classList.add('hidden'); updStats(); }

/* ========= Rendering ========= */
function render(){
  const q = pool[idx];
  qT.textContent = q.topic;
  qQ.textContent = q.question;
  qE.classList.add('hidden');
  qO.innerHTML = '';
  qN.innerHTML = '';
  qN.classList.add('hidden');
  btnNext.disabled = true;
  btnExplain.disabled = true;
  progress.textContent = `Frage ${idx+1} / ${pool.length}`;

  if(q.type === 'mc'){
    q.options.forEach((o,i)=>{
      const b=document.createElement('button'); b.className='opt'; b.textContent=o;
      b.onclick=()=>{
        [...qO.children].forEach(x=>x.disabled=true);
        if(i===q.answer){ b.classList.add('correct'); score++; }
        else { b.classList.add('wrong'); qO.children[q.answer].classList.add('correct'); }
        record.push({id:q.id, correct:i===q.answer});
        btnNext.disabled=false; btnExplain.disabled=false;
      };
      qO.appendChild(b);
    });
  }else{
    qN.classList.remove('hidden');
    const wrap=document.createElement('div'); wrap.className='inputRow';
    const inp=document.createElement('input'); inp.type='number'; inp.placeholder='Deine Zahl';
    const unit=document.createElement('span'); unit.textContent=q.unit||'';
    const chk=document.createElement('button'); chk.className='btn'; chk.textContent='Antwort pr√ºfen';
    wrap.appendChild(inp); wrap.appendChild(unit); wrap.appendChild(chk); qN.appendChild(wrap);
    chk.onclick=()=>{
      const v=parseFloat(inp.value);
      if(isNaN(v)){ alert('Bitte eine Zahl eingeben.'); return; }
      const tol=Math.abs(q.correct_value)*(q.tolerance_pct/100);
      const ok=(v>=q.correct_value-tol)&&(v<=q.correct_value+tol);
      const p=document.createElement('p');
      p.innerHTML = (ok?'‚úîÔ∏è Richtig':'‚ùå Falsch') + ` ‚Äî Richtwert: <strong>${format2(q.correct_value)}${q.unit||''}</strong> (Toleranz ¬±${q.tolerance_pct}%)`;
      qO.innerHTML=''; qO.appendChild(p);
      if(ok) score++;
      record.push({id:q.id, correct:ok});
      btnNext.disabled=false; btnExplain.disabled=false;
    };
  }
  qE.textContent = q.explanation || '';
}

function nextQ(){ if(++idx < pool.length) render(); else finish(); }
function prevQ(){ if(idx>0){ idx--; render(); } }
function showExplain(){ qE.classList.remove('hidden'); }

/* ========= Abschluss / Ergebnis ========= */
function finish(){
  clearInterval(timerInt);
  quiz.classList.add('hidden'); res.classList.remove('hidden');
  const pct = Math.round(score/pool.length*100);
  const g = grade(pct);
  resHead.textContent = 'Ergebnis';
  resText.textContent = `Du hast ${score} von ${pool.length} richtig (${pct} %) ‚Äì Note ${g}. ${feedback(g)}`;

  if(mode==='exam'){
    const hist = load('hist', []);
    hist.push({date: new Date().toLocaleDateString(), pct, grade: g, topic});
    save('hist', hist);
    const wrong = record.filter(r=>!r.correct).map(r=>r.id);
    save('wrong', wrong);
    btnErrNow.classList.remove('hidden'); btnErrNow.onclick = startErr;
    btnDown.classList.remove('hidden');
  } else {
    btnErrNow.classList.add('hidden');
    btnDown.classList.add('hidden');
  }
  timer.classList.add('hidden');
  updStats();
}

/* ========= Export ========= */
function downloadResults(){
  const data = { date: new Date().toISOString(), topic, score, total: pool.length, records: record };
  const blob = new Blob([JSON.stringify(data,null,2)], {type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a=document.createElement('a'); a.href=url; a.download='entchens_pruefungsergebnis.json'; a.click(); URL.revokeObjectURL(url);
}

/* ========= Init ========= */
function init(){
  const all=['Alle Themen', ...TOPICS];
  all.forEach(t=>{ const o=document.createElement('option'); o.value=t; o.textContent=t; topicSel.appendChild(o); });
  btnLearn.onclick = startLearn;
  btnExam.onclick = startExam;
  btnErr.onclick = startErr;
  btnNext.onclick = nextQ;
  btnBack.onclick = prevQ;
  btnExplain.onclick = showExplain;
  btnHome.onclick = backHome;
  btnHomeTop.onclick = backHome;
  btnPrint.onclick = ()=>window.print();
  btnDown.onclick = downloadResults;
  updStats();
}
init();

</script>
</body>
</html>
